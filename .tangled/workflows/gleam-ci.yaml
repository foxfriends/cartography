when:
  - event: ["push"]
    branch: ["*"]

engine: "nixery"

clone:
  skip: false
  depth: 1
  submodules: false

dependencies:
  nixpkgs:
    - gleam
    - rebar3

steps:
  - name: "Gleam format"
    command: |
      cd server
      gleam format --check
  - name: "Gleam check"
    command: |
      cd server
      gleam check
  - name: "Gleam test"
    command: |
      cd server
      gleam test
