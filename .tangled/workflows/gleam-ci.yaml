when:
  - event: ["push"]
    branch: ["*"]

engine: "nixery"

dependencies:
  nixpkgs:
    - gleam
    - rebar3

steps:
  - name: "Install dependencies"
    command: |
      cd server
      gleam deps download
  - name: "Gleam format"
    command: |
      cd server
      gleam format --check
  - name: "Gleam check"
    command: |
      cd server
      gleam check
  - name: "Gleam test"
    command: |
      cd server
      gleam test
