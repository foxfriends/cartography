import{f as i,a as o,t as O,c as W}from"./DTjTDYf3.js";import{Y as p,_ as $,Z as v,ad as _,p as H,aF as Q,g as n,ag as z,a as M,X as y,f}from"./Cy0nnqwK.js";import{s as U}from"./VCyrUZ76.js";import{i as T}from"./BxqNGrrm.js";import{s as q}from"./Zp7FgOxX.js";import{s as oe,a as ne,e as F,i as j}from"./DTiiyNL4.js";import{d as se}from"./wnUvJIYz.js";import{p as ee}from"./IrKOPqpB.js";import{s as ie}from"./Ni3ygk_w.js";const ze={"trading-centre":{type:"trading-centre",name:"Trading Centre",category:"trade"},"trading-post":{type:"trading-post",name:"Trading Post",category:"trade"},"cat-neighbourhood":{type:"cat-neighbourhood",name:"Cat Neighbourhood",category:"residential",population:[{quantity:6,species:"cat"}]},"rabbit-neighbourhood":{type:"rabbit-neighbourhood",name:"Rabbit Neighbourhood",category:"residential",population:[{quantity:6,species:"rabbit"}]},"water-well":{type:"water-well",name:"Water Well",category:"source",employees:1,source:[{type:"any"}],outputs:[{resource:"water",quantity:10}]},"wheat-farm":{type:"wheat-farm",name:"Wheat Farm",category:"source",employees:4,source:[{type:"terrain",terrain:"soil"}],outputs:[{resource:"wheat",quantity:4}]},"lettuce-farm":{type:"lettuce-farm",name:"Lettuce Farm",category:"source",employees:4,source:[{type:"terrain",terrain:"soil"}],outputs:[{resource:"lettuce",quantity:4}]},"tomato-farm":{type:"tomato-farm",name:"Tomato Farm",category:"source",employees:4,source:[{type:"terrain",terrain:"soil"}],outputs:[{resource:"tomato",quantity:4}]},"flour-mill":{type:"flour-mill",name:"Flour Mill",category:"production",employees:2,inputs:[{resource:"wheat",quantity:1}],outputs:[{resource:"flour",quantity:5}]},bakery:{type:"bakery",name:"Bakery",category:"production",employees:2,inputs:[{resource:"water",quantity:1},{resource:"flour",quantity:4}],outputs:[{resource:"bread",quantity:5}]},"salad-shop":{type:"salad-shop",name:"Salad Shop",category:"production",employees:2,inputs:[{resource:"tomato",quantity:1},{resource:"lettuce",quantity:2}],outputs:[{resource:"salad",quantity:3}]}};function ue(a){return e=>e&&a(e)}function ce(a){return e=>{e.key==="enter"&&a(e)}}function De(a){return e=>{e.buttons===1&&a(e)}}function Ee(...a){return e=>()=>e(...a)}function He(a){return e=>{e.preventDefault(),e.stopPropagation(),e.currentTarget.dispatchEvent(a(e))}}const le={water:{type:"water",name:"Water",value:0},wheat:{type:"wheat",name:"Wheat",value:1},lettuce:{type:"lettuce",name:"Lettuce",value:1},tomato:{type:"tomato",name:"Tomato",value:1},flour:{type:"flour",name:"Flour",value:2},bread:{type:"bread",name:"Bread",value:3},salad:{type:"salad",name:"Salad",value:3}};var de=i('<span class="shimmer svelte-j4afnf"><!></span>');function V(a,e){var r=de(),t=p(r);U(t,()=>e.children??$),v(r),_(()=>ie(r,e.style)),o(a,r)}function K(a,e){H(e,!0);const r=z(()=>le[e.id]);V(a,{style:"--shimmer-color: var(--color-resource)",children:(t,u)=>{Q();var s=O();_(()=>q(s,n(r).name)),o(t,s)}}),M()}const me={cat:{type:"cat",name:"Cat",namePlural:"Cats",needs:[{type:"resource",resource:"bread",quantity:1}]},rabbit:{type:"rabbit",name:"Rabbit",namePlural:"Rabbits",needs:[{type:"resource",resource:"salad",quantity:1}]}};function ve(a,e){H(e,!0);const r=ee(e,"plural",3,!1),t=z(()=>me[e.id]);V(a,{style:"--shimmer-color: var(--color-species)",children:(u,s)=>{Q();var c=O();_(()=>q(c,r()?n(t).namePlural:n(t).name)),o(u,c)}}),M()}const ye={soil:{type:"soil",name:"Soil"},grass:{type:"grass",name:"Grass"}};function pe(a,e){H(e,!0);const r=z(()=>ye[e.id]);V(a,{style:"--shimmer-color: var(--color-terrain)",children:(t,u)=>{Q();var s=O();_(()=>q(s,n(r).name)),o(t,s)}}),M()}var fe=i("<p> <!></p>"),_e=i("<p> <!></p>"),ge=i("<p> <!></p>"),he=i("<!> <!>",1),be=i("<p>Produces anywhere</p>"),qe=i("<p>Produces on <!></p>"),we=i("<!> <!>",1),xe=i("<p> <!></p>"),Pe=i("<!> <!>",1),Se=i('<div role="button"><div class="title svelte-1udyrqm"> </div> <div class="image svelte-1udyrqm"></div> <div class="info svelte-1udyrqm"><!></div></div>');function ke(a,e){H(e,!0);const r=ee(e,"disabled",3,!1);var t=Se();let u;t.__click=function(...l){(r()?void 0:e.onSelect)?.apply(this,l)};var s=z(()=>r()?void 0:ue(ce)(e.onSelect));t.__keydown=function(...l){n(s)?.apply(this,l)};var c=p(t),X=p(c);v(c);var D=y(c,4),g=p(D);{var E=l=>{var G=W(),A=f(G);F(A,17,()=>e.card.population,j,(I,B)=>{var d=fe(),h=p(d),k=y(h);{let L=z(()=>n(B).quantity!==1);ve(k,{get id(){return n(B).species},get plural(){return n(L)}})}v(d),_(()=>q(h,`Houses ${n(B).quantity??""} `)),o(I,d)}),o(l,G)},Z=l=>{var G=W(),A=f(G);{var I=d=>{var h=he(),k=f(h);F(k,17,()=>e.card.inputs,j,(w,b)=>{var m=_e(),x=p(m),P=y(x);K(P,{get id(){return n(b).resource}}),v(m),_(()=>q(x,`Consumes ${n(b).quantity??""} `)),o(w,m)});var L=y(k,2);F(L,17,()=>e.card.outputs,j,(w,b)=>{var m=ge(),x=p(m),P=y(x);K(P,{get id(){return n(b).resource}}),v(m),_(()=>q(x,`Produces ${n(b).quantity??""} `)),o(w,m)}),o(d,h)},B=d=>{var h=W(),k=f(h);{var L=w=>{var b=Pe(),m=f(b);F(m,17,()=>e.card.source,j,(P,C)=>{var R=we(),N=f(R);{var J=S=>{var Y=be();o(S,Y)};T(N,S=>{n(C).type==="any"&&S(J)})}var ae=y(N,2);{var te=S=>{var Y=qe(),re=y(p(Y));pe(re,{get id(){return n(C).terrain}}),v(Y),o(S,Y)};T(ae,S=>{n(C).type==="terrain"&&S(te)})}o(P,R)});var x=y(m,2);F(x,17,()=>e.card.outputs,j,(P,C)=>{var R=xe(),N=p(R),J=y(N);K(J,{get id(){return n(C).resource}}),v(R),_(()=>q(N,`Yields ${n(C).quantity??""} `)),o(P,R)}),o(w,b)};T(k,w=>{e.card.category==="source"&&w(L)},!0)}o(d,h)};T(A,d=>{e.card.category==="production"?d(I):d(B,!1)},!0)}o(l,G)};T(g,l=>{e.card.category==="residential"?l(E):l(Z,!1)})}v(D),v(t),_(()=>{u=oe(t,1,"card svelte-1udyrqm",null,u,{selectable:!r()&&e.onSelect,disabled:r()}),ne(t,"tabindex",!r()&&e.onSelect?0:void 0),q(X,`${e.card.name??""} | ${e.card.category??""}`)}),o(a,t),M()}se(["click","keydown"]);var Ce=i('<div class="grid svelte-1hhz0mg"></div>');function Re(a,e){var r=Ce();F(r,20,()=>e.items,t=>t,(t,u)=>{var s=W(),c=f(s);U(c,()=>e.item,()=>u),o(t,s)}),v(r),o(a,r)}function Me(a,e){Re(a,{get items(){return e.cards},item:(t,u=$)=>{var s=W(),c=f(s);{var X=g=>{var E=W(),Z=f(E);U(Z,()=>e.card,u),o(g,E)},D=g=>{ke(g,{get card(){return u()}})};T(c,g=>{e.card?g(X):g(D,!1)})}o(t,s)}})}export{Me as C,Re as G,K as R,V as S,pe as T,He as a,ke as b,ze as c,Ee as d,ce as e,ve as f,De as l,le as r,me as s};
