import{f as A,a as M}from"./DTjTDYf3.js";import{q as O,j as T,p as R,ad as S,a as Z,c as l,g as a,s as w,ah as d,Y as y,_ as B,Z as C}from"./Cy0nnqwK.js";import{d as E,e as m}from"./wnUvJIYz.js";import{s as F}from"./VCyrUZ76.js";import{s as G}from"./Ni3ygk_w.js";import{p as u}from"./IrKOPqpB.js";class b{#e=new WeakMap;#t;#o;static entries=new WeakMap;constructor(e){this.#o=e}observe(e,o){var s=this.#e.get(e)||new Set;return s.add(o),this.#e.set(e,s),this.#i().observe(e,this.#o),()=>{var n=this.#e.get(e);n.delete(o),n.size===0&&(this.#e.delete(e),this.#t.unobserve(e))}}#i(){return this.#t??(this.#t=new ResizeObserver(e=>{for(var o of e){b.entries.set(o.target,o);for(var s of this.#e.get(o.target)||[])s(o)}}))}}var I=new b({box:"border-box"});function _(f,e,o){var s=I.observe(f,()=>o(f[e]));O(()=>(T(()=>o(f[e])),s))}var J=A('<div class="window svelte-1j4berq" role="presentation"><!></div>');function V(f,e){R(e,!0);let o=u(e,"tileWidth",3,128),s=u(e,"tileHeight",3,128),n=u(e,"offsetX",15,0),c=u(e,"offsetY",15,0),x=u(e,"clientWidth",15,0),W=u(e,"clientHeight",15,0),g=w(!1);function Y(t){t.preventDefault()}function D(t){t.buttons===2&&l(g,!0)}function H(t){t.button===2&&l(g,!1)}function X(t){a(g)&&(n(n()-t.movementX),c(c()-t.movementY))}let r=w(null);function z(t){a(r)===null&&t.changedTouches.length===1&&l(r,t.changedTouches[0],!0)}function p(t){a(r)&&!Array.from(t.touches).some(h=>h.identifier===a(r).identifier)&&l(r,null)}function k(t){if(a(r)===null)return;const h=a(r),v=Array.from(t.touches).find(q=>q.identifier===h.identifier);v&&(n(n()-(v.clientX-h.clientX)),c(c()-(v.clientY-h.clientY)),l(r,v,!0))}var i=J();m("mousemove",d,X),m("mouseup",d,H),m("touchmove",d,k,void 0,!0),m("touchend",d,p),m("touchcancel",d,p),i.__mousedown=D,i.__touchstart=z,i.__contextmenu=Y;var j=y(i);F(j,()=>e.children??B),C(i),S(()=>G(i,`--offset-x: ${n()??""}px; --offset-y: ${c()??""}px; --tile-width: ${o()??""}px; --tile-height: ${s()??""}px;`)),_(i,"clientWidth",x),_(i,"clientHeight",W),M(f,i),Z()}E(["mousedown","touchstart","contextmenu"]);export{V as D,_ as b};
