import"../chunks/DTjTDYf3.js";import{s as u,a3 as b,c as n,g as d,ae as l,p as g,a as m}from"../chunks/Cy0nnqwK.js";import{s as _,a as $}from"../chunks/IrKOPqpB.js";import{s as S}from"../chunks/BXN2zbQS.js";import{D as x}from"../chunks/CFNKoBvp.js";import{g as F}from"../chunks/Disko3h9.js";import{S as f}from"../chunks/Du5sam5i.js";const v=()=>{const e=S;return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},updated:e.updated}},C={subscribe(e){return v().page.subscribe(e)}};function h(e){return Number.parseInt(e)}const w=Symbol("Field State");function D(e,i){const s=F();let r=u(b(i)),a=u(b(new f));s.$on("auth",()=>{const o=s.subscribe("fields"),c=s.subscribe({topic:"field_cards",field_id:e});return s.getField(e).$then(({data:t})=>{n(r,t.field,!0),n(a,new f(t.field_cards.map(p=>[p.card_id,p])),!0)}),c.$on("next",({message:t})=>{d(a).set(t.data.field_card.card_id,t.data.field_card)}),o.$on("next",({message:t})=>{n(r,t.data.field,!0)}),()=>{o.unsubscribe(),c.unsubscribe()}}),l(w,{get field(){return d(r)},get fieldCards(){return d(a)}})}function M(e,i){g(i,!0);const s=()=>_(C,"$page",r),[r,a]=$(),{fieldId:o}=s().params;D(h(o)),x(e,{}),m(),a()}export{M as component};
